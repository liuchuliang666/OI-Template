## 引入

在 OI 中，一些题目会给定一个区间 $[L, R]$，要求我们统计其中符合一些性质的数的个数。

由于给定的区间长度可能会很大（例如 $10 ^ 9$、$10 ^ {18}$ 甚至是 $10 ^ {10 ^ 5}$），因此我们需要借助计数类 DP 来完成，这就是数位 DP。

## 框架

首先，我们将区间 $[L, R]$ 拆成 $[1, R] - [1, L - 1]$，或者 $[1, R] - [1, L] + {L}$。

然后就转成了对 $[1, x]$ 计数。

一般情况下，对于数位 DP 而言，记忆化搜索是一个比较简单的实现方式。

我们先将 $x$ 在给定进制下分解为 $len$ 位置的数，然后我们考虑从高到低一位一位填上去。

```cpp
int len, num[MAXN], f[MAXN][MAXN][...];
int dp(int d, bool up, ...) // up 判断是否前面都按照上限填
{
    if(!up && ~f[d][...]) return f[d][...];
    int res = 0, lim = up ? num[d] : 9; // 该位能填的最高数码
    rep(i, 0, lim) if(conditions(...)) add(res, dp(d + 1, up && i == lim, ...));
    if(up) return res;
    return f[d][...] = res;
}
```

还是比较好懂的。

## 例题

???+ question "[P4127 同类分布](https://www.luogu.com.cn/problem/P4127)"
    给出两个数 $a, b$，求出 $[a, b]$ 中各位数字之和能整除原数的数的个数，其中 $1 \leq a \leq b \leq 10^{18}$。

我们考虑枚举这个各位数字和 $s$，将原数对 $s$ 取模的结果，以及当前各位和计入状态即可。

??? code "实现"
    ```cpp
    --8<-- "docs/DP/code/P4127.cpp:62:97"
    ```

???+ question "[P6128 [USACO06NOV] Round Numbers S](https://www.luogu.com.cn/problem/P6128)"
    如果一个正整数的二进制表示中，$0$ 的数目不小于 $1$ 的数目，那么它就被称为「圆数」。

    例如，$9$ 的二进制表示为 $1001$，其中有 $2$ 个 $0$ 与 $2$ 个 $1$。因此，$9$ 是一个「圆数」。

    请你计算，区间 $[l,r]$ 中有多少个「圆数」，其中 $1\le l,r\le 2\times 10^9$。

变成了二进制，不过本质没有区别。

这里注意一下前导零的事情，记录一下即可。

??? code "实现"
    ```cpp
    --8<-- "docs/DP/code/P6128.cpp:62:87"
    ```