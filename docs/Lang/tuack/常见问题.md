## tuack.test 卡住

在这个进程卡住：

```plain
[I]共?组样例，?个预测试点，?个测试点，不是打包评测。
```

检查是否有被占用的 `tmp` 文件夹，如果有的话将它删除。

这个问题常见于装有 xx 管家会自动进入文件夹扫描，或手动停止测试进程后进入该文件夹导致文件夹被占用无法删除。

## 输出信息

因为大家会用五花八门的环境，所以轮子难免会遇到各种问题。例如在Windows下的Git-Bash会出现编码问题：

```
[I]▒ű▒G:\oi_tools\test.py▒▒▒▒▒▒·▒▒G:\oi_tools▒▒▒▒▒▒[]▒▒▒▒ʼ▒▒2017-05-01 01:36:14.047870▒▒
[W]▒▒Ŀ``ȱ▒▒`users`▒ֶΣ▒ʹ▒▒`python -m gen code`▒▒▒▒Դ▒▒▒롣
```

为了尽可能让不同环境都好用，脚本会在 `%homepath%/.tuack` 下（对于 Windows）或 `~/.tuack` 下（对于其他）自动生成一个 `conf.json` ，会有类似于下面的东西：

```
"Windows_NT$...$C:/.../Git/usr/bin/bash$py30501f0": {
  "bash_log": {
    "encoding": "utf-8",
    "format": "[%(levelname).2s]%(message)s",
    "level": 40
  },
  "file_log": {
    "mode": "w",
    "path": "hehe.log"
  },
  "installed": {
    "git": true,
    "git_lfs": true,
    "natsort": true
  }
}
```

上述问题可以通过把 `bash_log` 的 `encoding` 改成 `utf-8` 解决（如果没有相应字段，则可以手工添加）。此外 log 还支持一些其他功能，例如这套配置的意思是用2个（默认1个）字母表示信息的种类，只输出error和critical（等级不小于40），log文件采用w而不是a模式输出，输出文件名为hehe.log。关于logging的更多信息可以参看[这里](https://docs.python.org/2/library/logging.html)。

对于 Windows 10，还可以尝试将整个系统都改成 UTF-8 编码，具体在控制面板→时钟和区域→更改日期、时间或数字格式→管理→更改系统区域设置→Beta 版：使用 Unicode UTF-8 提供全球语言支持。

上面还记了哪些工具是检测到已经安装的，必要时你可以手工修改。（例如你就不安装git又不喜欢它一直警告你）

注意首行是区分当前所处环境的字段，包含操作系统版本、bash版本、python版本等。

## pandoc的timer问题

王聿中同学之前处理过这个问题，可以联系他解决@wyz 。

## 如何修改翻译文件

维护本轮子的时候，如果要增加或修改某些说法的统一名称（如“输入格式”），请修改 `templates` 目录下相应语言文件夹下的 `.po` 文件，然后用下列语法进行编译（相会编译成 `.mo` 文件）：

```
python %python安装目录%/Tools/i18n/msgfmt.py lang.po
```

